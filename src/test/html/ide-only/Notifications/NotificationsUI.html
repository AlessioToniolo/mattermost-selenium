<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://selenium.mattermost.com/" />
<title>Notifications</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">Notifications</td></tr>
</thead><tbody>
<!--LOG IN test6-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test6@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Add new channel creation, add test7 to channel, don't use off-topic-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newPublicChannelName</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>id=newPublicChannelName</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=newPublicChannelName</td>
	<td>${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=channelAddMembers</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelAddMembers</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@class='Select-input']/input</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>//div[@class='Select-input']/input</td>
	<td>test7</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@test7</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@test7</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.Select-control</td>
	<td>Ã—test7 <br /><br />Press backspace to remove undefined</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveSetting</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>test7 added to the channel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<!--Caret preceding mention-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>^@test7${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=@test7</td>
	<td></td>
</tr>
<!--LOG OUT test6-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN test7-->
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test7@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Verify mention badge - ^-->
<tr>
	<td>waitForText</td>
	<td>css=span.badge</td>
	<td>2</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>link=NotifyUI2</td>
	<td>NotifyUI2</td>
</tr>
<tr>
	<td>click</td>
	<td>link=NotifyUI2</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=NotifyUI</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('^@test7')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=@test7</td>
	<td></td>
</tr>
<!--Switch to Town Square so won't be on this channel on logging back in-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarSwitcherButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarSwitcherButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=input.form-control.focused</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>css=input.form-control.focused</td>
	<td>town</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.mentions__name.suggestion--selected</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.mentions__name.suggestion--selected</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Town Square</td>
</tr>
<!--LOG OUT test7-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN test6-->
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test6@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=NotifyUI</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=NotifyUI</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<!--Octothorpe preceding mention-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>#@test7${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('#@test7')</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Dollar sign preceding mention-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>$@test7${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('$@test7')</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Ampersand preceding mention-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>&amp;@test7${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('&amp;@test7')</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--User mention doesn't fire in a code block-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>```<br />@test7<br />```${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=code.hljs</td>
	<td>@test7</td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Mention in italic markdown-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>*@test7*${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=em &gt; span &gt; span &gt; a.mention-link</td>
	<td>@test7</td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Mention in strikethrough markdown-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>~~@test7~~${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=del &gt; span &gt; span &gt; a.mention-link</td>
	<td>@test7</td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--LOG OUT test6-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN test7-->
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test7@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Verify mention badge - strikethrough-->
<tr>
	<td>waitForText</td>
	<td>css=span.badge</td>
	<td>5</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>link=NotifyUI5</td>
	<td>NotifyUI5</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=NotifyUI5</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=NotifyUI5</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=NotifyUI</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>NotifyUI</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=code.hljs</td>
	<td>@test7</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=em &gt; span.mention--highlight &gt; span &gt; span &gt; a.mention-link.mention--highlight</td>
	<td>@test7</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=del &gt; span.mention--highlight &gt; span &gt; span &gt; a.mention-link</td>
	<td>@test7</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>#@test7*$@test7*&amp;@test7*@test7*@test7*@test7</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=@test7</td>
	<td></td>
</tr>
<!--LOG OUT test7-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN test6-->
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test6@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--at-channel warning (with >5 users, cancel out of sending)-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>@channel hello!${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=h4.modal-title &gt; span:contains('Confirm sending notifications to entire channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-default</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-default</td>
	<td></td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td>@channel hello!</td>
</tr>
<!--at-all warning (with >5 users, cancel out of sending)-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}</td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>@all hello!${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=h4.modal-title &gt; span:contains('Confirm sending notifications to entire channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.modal-body &gt; span</td>
	<td>By using @all or @channel you are about to send notifications to 11 people. Are you sure you want to do this?</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-default</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-default</td>
	<td></td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td>@all hello!</td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}${KEY_BACKSPACE}</td>
</tr>
<!--at-channel in channel header does not trigger mention-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>/header @channel in header${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p.markdown__paragraph-inline</td>
	<td>@channel in header</td>
</tr>
<!--LOG OUT test6-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<!--LOG IN test7-->
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>name=loginId</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test7@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Town Square</td>
</tr>
<!--Verify no mention badge-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=NotifyUI</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Town Square</td>
	<td></td>
</tr>
<tr>
	<td>waitForTextNotPresent</td>
	<td>css=span.badge</td>
	<td>1</td>
</tr>
<tr>
	<td>verifyNotText</td>
	<td>link=Off-Topic1</td>
	<td>Off-Topic1</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p.markdown__paragraph-inline &gt; span.mention--highlight &gt; span</td>
	<td>@channel</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p.markdown__paragraph-inline</td>
	<td>@channel in header</td>
</tr>
<!--LOG OUT test7-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.sidebar-header-dropdown__icon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Logout</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Logout</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
